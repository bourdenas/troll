# cmake .. -DCMAKE_TOOLCHAIN_FILE=D:/dev/vcpkg/scripts/buildsystems/vcpkg.cmake
cmake_minimum_required(VERSION 3.6)
project(troll)

set(CMAKE_CXX_STANDARD 17)

# Disable warnings generated by protobuf lib and dominate output.
add_compile_options(/wd4146)
add_compile_options(/wd4251)
add_compile_options(/wd4996)

include_directories(".")
include_directories(${CMAKE_CURRENT_BINARY_DIR})

if(MSVC)
  # Visual Studio compiler cannot compile range-v3 library, use alternative.
  include_directories("../vcpkg/packages/range-v3-vs2015_x86-windows/include")
  # vcpkg is unable to find SDL2-{image,ttf,mixer}, hard-link lib path.
  link_directories("../vcpkg/installed/x86-windows/lib")
endif()

find_package(SDL2 REQUIRED)

find_package(glog REQUIRED) 

find_package(Protobuf REQUIRED)
include_directories(${PROTOBUF_INCLUDE_DIRS})

find_package(PythonLibs REQUIRED)

find_package(Catch2 CONFIG REQUIRED)

# Use -DBUILD_TESTING=OFF to disable tests.
add_subdirectory(deps/abseil-cpp)
add_subdirectory(deps/pybind11)
add_subdirectory(deps/range-v3)

enable_testing()

include(CTest)
include(Catch)

add_subdirectory(action)
add_subdirectory(animation)
add_subdirectory(core)
add_subdirectory(input)
add_subdirectory(proto)
add_subdirectory(scripting)
add_subdirectory(sdl)
add_subdirectory(sound)

add_subdirectory(samples/donkey_kong)
