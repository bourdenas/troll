cmake_minimum_required(VERSION 3.6)
project(troll)

set(CMAKE_CXX_STANDARD 17)

# Disable warnings generated by protobuf lib and dominate output.
add_compile_options(/wd4146)
add_compile_options(/wd4251)
add_compile_options(/wd4996)

include_directories(".")
include_directories(${CMAKE_CURRENT_BINARY_DIR})

find_package(SDL2 CONFIG REQUIRED)
find_package(sdl2-image CONFIG REQUIRED)
find_package(sdl2-ttf CONFIG REQUIRED)
find_package(sdl2-mixer CONFIG REQUIRED)

find_package(absl CONFIG REQUIRED) 
find_package(glog CONFIG REQUIRED) 

find_package(Protobuf REQUIRED)
include_directories(${PROTOBUF_INCLUDE_DIRS})

find_package(Catch2 CONFIG REQUIRED)
find_package(range-v3 CONFIG REQUIRED)

enable_testing()

include(CTest)
include(Catch)

add_subdirectory(action)
add_subdirectory(animation)
add_subdirectory(core)
add_subdirectory(input)
add_subdirectory(proto)
add_subdirectory(sdl)
add_subdirectory(sound)

if (DART_TROLL)
  add_subdirectory(dart_troll)
endif()

if (PYTROLL)
  find_package(PythonLibs REQUIRED)
  add_subdirectory(deps/pybind11)
  add_subdirectory(pytroll)

  add_subdirectory(samples/donkey_kong)
endif()
