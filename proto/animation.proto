syntax = "proto2";

import "proto/primitives.proto";

package troll;

message SpriteAnimation {
  repeated AnimationScript script = 1;
}

message AnimationScript {
  optional string id = 1;
  repeated Animation animation = 2;
}

message Animation {
  enum TerminationCondition {
    ANY = 0;
    ALL = 1;
  }
  optional TerminationCondition termination = 1;
  optional int32 repeat = 2;
  repeated string event = 3;

  optional VectorAnimation translation = 4;
  optional VectorAnimation rotation = 5;
  optional VectorAnimation scaling = 6;
  optional FrameRangeAnimation frame_range = 7;
  optional FrameListAnimation frame_list = 8;
  optional GotoAnimation go_to = 9;
  optional FlashAnimation flash = 10;
  optional TimerAnimation timer = 11;
}

message VectorAnimation {
  optional Vector vec = 1;
  optional int32 delay = 2;
}

enum VerticalAlign {
  TOP = 0;
  BOTTOM = 1;
  VCENTRE = 2;
}

enum HorizontalAlign {
  LEFT = 0;
  RIGHT = 1;
  HCENTRE = 2;
}

message FrameRangeAnimation {
  optional int32 start_frame = 1;
  optional int32 end_frame = 2;
  optional int32 delay = 3;

  optional VerticalAlign vertical_align = 4;
  optional HorizontalAlign horizontal_align = 5;
}

message FrameListAnimation {
  repeated int32 frame = 1;
  optional int32 delay = 2;

  optional VerticalAlign vertical_align = 3;
  optional HorizontalAlign horizontal_align = 4;
}

message GotoAnimation {
  optional Vector destination = 1;
  optional float step = 2;
  optional int32 delay = 3;
}

message FlashAnimation {
  optional int32 delay = 1;
}

message TimerAnimation {
  optional int32 delay = 1;
}
