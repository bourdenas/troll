syntax = "proto2";

import "proto/event.proto";
import "proto/primitives.proto";
import "proto/scene-node.proto";

package troll;

message Action {
  oneof Action {
    NoopAction noop = 1;
    QuitAction quit = 2;
    EmitAction emit = 3;

    ChangeSceneAction change_scene = 4;
    
    SceneNodeAction create_scene_node = 5;
    SceneNodeAction destroy_scene_node = 6;

    CollisionAction on_collision = 7;

    AnimationScriptAction play_animation_script = 8;
    AnimationScriptAction stop_animation_script = 9;
    AnimationScriptAction pause_animation_script = 10;

    DisplayTextAction display_text = 11;

    ScriptAction import_module = 12;
    ScriptAction call = 13;
  }
}

message NoopAction {}

message QuitAction {}

message EmitAction {
  optional Event event = 1;
}

message ChangeSceneAction {
  optional string scene_id = 1;
}

message SceneNodeAction {
  optional SceneNode scene_node = 1;
}

message CollisionAction {
  repeated string sprite_id = 1;
  repeated string scene_node_id = 2;
  repeated Action action = 3;
}

message AnimationScriptAction {
  optional string script_id = 1;
  optional string scene_node_id = 2;
}

message DisplayTextAction {
  optional string text = 1;
  optional Vector position = 2;
  optional int32 display_duration = 3;

  optional int32 size = 4;
  optional bool bold = 5;
  optional bool italics = 6;

  optional RGBa colour = 7;
  optional RGBa background_colour = 8;
  optional string font = 9;
}

message ScriptAction {
  optional string module = 1;
  optional string function = 2;
}
